{"ast":null,"code":"import { io } from 'socket.io-client';\nclass SocketService {\n  constructor() {\n    this.socket = null;\n  }\n  connect() {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      throw new Error('No authentication token found');\n    }\n    this.socket = io(process.env.REACT_APP_SOCKET_URL || 'http://localhost:5000', {\n      auth: {\n        token: token\n      }\n    });\n    return new Promise((resolve, reject) => {\n      this.socket.on('connect', () => {\n        console.log('Connected to server');\n        resolve(this.socket);\n      });\n      this.socket.on('connect_error', error => {\n        console.error('Connection error:', error);\n        reject(error);\n      });\n    });\n  }\n  disconnect() {\n    if (this.socket) {\n      this.socket.disconnect();\n      this.socket = null;\n    }\n  }\n  emit(event, data) {\n    if (this.socket) {\n      this.socket.emit(event, data);\n    }\n  }\n  on(event, callback) {\n    if (this.socket) {\n      this.socket.on(event, callback);\n    }\n  }\n  off(event, callback) {\n    if (this.socket) {\n      this.socket.off(event, callback);\n    }\n  }\n}\nexport default new SocketService();","map":{"version":3,"names":["io","SocketService","constructor","socket","connect","token","localStorage","getItem","Error","process","env","REACT_APP_SOCKET_URL","auth","Promise","resolve","reject","on","console","log","error","disconnect","emit","event","data","callback","off"],"sources":["C:/Users/Lenovo/ambulance-data-system/frontend/src/services/socket.js"],"sourcesContent":["import { io } from 'socket.io-client';\r\n\r\nclass SocketService {\r\n  constructor() {\r\n    this.socket = null;\r\n  }\r\n\r\n  connect() {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      throw new Error('No authentication token found');\r\n    }\r\n\r\n    this.socket = io(process.env.REACT_APP_SOCKET_URL || 'http://localhost:5000', {\r\n      auth: {\r\n        token: token\r\n      }\r\n    });\r\n\r\n    return new Promise((resolve, reject) => {\r\n      this.socket.on('connect', () => {\r\n        console.log('Connected to server');\r\n        resolve(this.socket);\r\n      });\r\n\r\n      this.socket.on('connect_error', (error) => {\r\n        console.error('Connection error:', error);\r\n        reject(error);\r\n      });\r\n    });\r\n  }\r\n\r\n  disconnect() {\r\n    if (this.socket) {\r\n      this.socket.disconnect();\r\n      this.socket = null;\r\n    }\r\n  }\r\n\r\n  emit(event, data) {\r\n    if (this.socket) {\r\n      this.socket.emit(event, data);\r\n    }\r\n  }\r\n\r\n  on(event, callback) {\r\n    if (this.socket) {\r\n      this.socket.on(event, callback);\r\n    }\r\n  }\r\n\r\n  off(event, callback) {\r\n    if (this.socket) {\r\n      this.socket.off(event, callback);\r\n    }\r\n  }\r\n}\r\n\r\nexport default new SocketService();"],"mappings":"AAAA,SAASA,EAAE,QAAQ,kBAAkB;AAErC,MAAMC,aAAa,CAAC;EAClBC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,MAAM,GAAG,IAAI;EACpB;EAEAC,OAAOA,CAAA,EAAG;IACR,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAI,CAACF,KAAK,EAAE;MACV,MAAM,IAAIG,KAAK,CAAC,+BAA+B,CAAC;IAClD;IAEA,IAAI,CAACL,MAAM,GAAGH,EAAE,CAACS,OAAO,CAACC,GAAG,CAACC,oBAAoB,IAAI,uBAAuB,EAAE;MAC5EC,IAAI,EAAE;QACJP,KAAK,EAAEA;MACT;IACF,CAAC,CAAC;IAEF,OAAO,IAAIQ,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;MACtC,IAAI,CAACZ,MAAM,CAACa,EAAE,CAAC,SAAS,EAAE,MAAM;QAC9BC,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;QAClCJ,OAAO,CAAC,IAAI,CAACX,MAAM,CAAC;MACtB,CAAC,CAAC;MAEF,IAAI,CAACA,MAAM,CAACa,EAAE,CAAC,eAAe,EAAGG,KAAK,IAAK;QACzCF,OAAO,CAACE,KAAK,CAAC,mBAAmB,EAAEA,KAAK,CAAC;QACzCJ,MAAM,CAACI,KAAK,CAAC;MACf,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;EAEAC,UAAUA,CAAA,EAAG;IACX,IAAI,IAAI,CAACjB,MAAM,EAAE;MACf,IAAI,CAACA,MAAM,CAACiB,UAAU,CAAC,CAAC;MACxB,IAAI,CAACjB,MAAM,GAAG,IAAI;IACpB;EACF;EAEAkB,IAAIA,CAACC,KAAK,EAAEC,IAAI,EAAE;IAChB,IAAI,IAAI,CAACpB,MAAM,EAAE;MACf,IAAI,CAACA,MAAM,CAACkB,IAAI,CAACC,KAAK,EAAEC,IAAI,CAAC;IAC/B;EACF;EAEAP,EAAEA,CAACM,KAAK,EAAEE,QAAQ,EAAE;IAClB,IAAI,IAAI,CAACrB,MAAM,EAAE;MACf,IAAI,CAACA,MAAM,CAACa,EAAE,CAACM,KAAK,EAAEE,QAAQ,CAAC;IACjC;EACF;EAEAC,GAAGA,CAACH,KAAK,EAAEE,QAAQ,EAAE;IACnB,IAAI,IAAI,CAACrB,MAAM,EAAE;MACf,IAAI,CAACA,MAAM,CAACsB,GAAG,CAACH,KAAK,EAAEE,QAAQ,CAAC;IAClC;EACF;AACF;AAEA,eAAe,IAAIvB,aAAa,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}