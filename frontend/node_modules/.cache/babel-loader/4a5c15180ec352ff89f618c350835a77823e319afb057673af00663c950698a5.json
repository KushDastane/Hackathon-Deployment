{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\ambulance-data-system\\\\frontend\\\\src\\\\pages\\\\MapView.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\nimport L from 'leaflet';\n\n// Fix default icon path problem in some setups\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png')\n});\nconst center = {\n  lat: 18.5204,\n  lng: 73.8567\n}; // Pune default\n\nexport default function MapView() {\n  _s();\n  const [locations, setLocations] = useState([\n  // Optional: fallback/demo marker\n  {\n    id: 1,\n    name: 'Demo Ambulance',\n    lat: 18.5204,\n    lng: 73.8567,\n    status: 'Available'\n  }]);\n\n  // Optional: fetch real markers from your backend\n  useEffect(() => {\n    const fetchLocations = async () => {\n      try {\n        const res = await fetch('http://localhost:5000/api/ambulances'); // change endpoint if needed\n        if (!res.ok) throw new Error('Failed to fetch');\n        const data = await res.json();\n        // transform into { id, lat, lng, name, status }\n        const pts = data.map(a => {\n          var _a$location, _a$location2;\n          return {\n            id: a._id || a.id,\n            name: a.name || a.label || 'Ambulance',\n            lat: ((_a$location = a.location) === null || _a$location === void 0 ? void 0 : _a$location.lat) || a.latitude || a.lat,\n            lng: ((_a$location2 = a.location) === null || _a$location2 === void 0 ? void 0 : _a$location2.lng) || a.longitude || a.lng,\n            status: a.status || 'unknown'\n          };\n        }).filter(p => p.lat && p.lng);\n        if (pts.length) setLocations(pts);\n      } catch (err) {\n        console.warn('Could not load ambulance locations', err.message);\n      }\n    };\n    fetchLocations();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: '100%',\n      height: '600px'\n    },\n    children: /*#__PURE__*/_jsxDEV(MapContainer, {\n      center: [center.lat, center.lng],\n      zoom: 12,\n      style: {\n        height: '100%',\n        width: '100%'\n      },\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\",\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), locations.map(loc => /*#__PURE__*/_jsxDEV(Marker, {\n        position: [loc.lat, loc.lng],\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: loc.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 42\n          }, this), \"Status: \", loc.status]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }, this)\n      }, loc.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n}\n_s(MapView, \"cZ1RUxVMoXC20dbJWOOahuriODM=\");\n_c = MapView;\nvar _c;\n$RefreshReg$(_c, \"MapView\");","map":{"version":3,"names":["React","useEffect","useState","MapContainer","TileLayer","Marker","Popup","L","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","require","iconUrl","shadowUrl","center","lat","lng","MapView","_s","locations","setLocations","id","name","status","fetchLocations","res","fetch","ok","Error","data","json","pts","map","a","_a$location","_a$location2","_id","label","location","latitude","longitude","filter","p","length","err","console","warn","message","style","width","height","children","zoom","attribution","url","fileName","_jsxFileName","lineNumber","columnNumber","loc","position","_c","$RefreshReg$"],"sources":["C:/Users/Lenovo/ambulance-data-system/frontend/src/pages/MapView.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\r\nimport L from 'leaflet';\r\n\r\n// Fix default icon path problem in some setups\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\r\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\r\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png'),\r\n});\r\n\r\nconst center = { lat: 18.5204, lng: 73.8567 }; // Pune default\r\n\r\nexport default function MapView() {\r\n  const [locations, setLocations] = useState([\r\n    // Optional: fallback/demo marker\r\n    { id: 1, name: 'Demo Ambulance', lat: 18.5204, lng: 73.8567, status: 'Available' }\r\n  ]);\r\n\r\n  // Optional: fetch real markers from your backend\r\n  useEffect(() => {\r\n    const fetchLocations = async () => {\r\n      try {\r\n        const res = await fetch('http://localhost:5000/api/ambulances'); // change endpoint if needed\r\n        if (!res.ok) throw new Error('Failed to fetch');\r\n        const data = await res.json();\r\n        // transform into { id, lat, lng, name, status }\r\n        const pts = data.map(a => ({\r\n          id: a._id || a.id,\r\n          name: a.name || a.label || 'Ambulance',\r\n          lat: a.location?.lat || a.latitude || a.lat,\r\n          lng: a.location?.lng || a.longitude || a.lng,\r\n          status: a.status || 'unknown'\r\n        })).filter(p => p.lat && p.lng);\r\n        if (pts.length) setLocations(pts);\r\n      } catch (err) {\r\n        console.warn('Could not load ambulance locations', err.message);\r\n      }\r\n    };\r\n\r\n    fetchLocations();\r\n  }, []);\r\n\r\n  return (\r\n    <div style={{ width: '100%', height: '600px' }}>\r\n      <MapContainer center={[center.lat, center.lng]} zoom={12} style={{ height: '100%', width: '100%' }}>\r\n        {/* OpenStreetMap tile layer â€” free */}\r\n        <TileLayer\r\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n        />\r\n\r\n        {locations.map(loc => (\r\n          <Marker key={loc.id} position={[loc.lat, loc.lng]}>\r\n            <Popup>\r\n              <strong>{loc.name}</strong><br/>\r\n              Status: {loc.status}\r\n            </Popup>\r\n          </Marker>\r\n        ))}\r\n      </MapContainer>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}